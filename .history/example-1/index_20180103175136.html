<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Emscripten-Generated Code</title>
 </head>
 <body>
    <div style="width: 200px; margin: auto; margin-top: 20px;">
        <h2>阶乘计算</h2>
        <input type="number" id="Input"/> 
        <button onclick="factorial()">计算</button>
    </div>
    <script type="text/javascript">
        
        var importObject = {
            imports: {
                factorial: function(arg) {
                    console.log(arg);
                }
            }
        };

        fetch('test.wasm').then(res => {
            return res.arrayBuffer()
        }).then(bytes => {
            // 利用WebAssembly.instantiate接口将wasm模块的方法与importObject进行映射
            return WebAssembly.instantiate(bytes, importObject)
        }).then(obj => {
            // 执行调用factorial
            obj.instance.exports.factorial(10);
        })

        function factorial() {
            var num = document.getElementById(Input).value;
            
        }

    </script>
 </body>
 </html>